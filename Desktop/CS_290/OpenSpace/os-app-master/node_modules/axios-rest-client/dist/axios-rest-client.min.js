!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t(require("axios")):"function"==typeof define&&define.amd?define(["axios"],t):e.axiosRestClient=t(e.axios)}(this,function(e){"use strict";e=e&&e.hasOwnProperty("default")?e.default:e;var t=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")},r=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),n=function(e,t,r){return e>=t&&e<=r},s=function(){function s(r){t(this,s),this.apiCache={},this.baseUrl=r.baseUrl,this.options={},this.currentRequestOptions={},this.requestTransformers=[],this.responseTransformers=[];var n=Object.assign({baseURL:this.baseUrl,headers:{Accept:"application/json"}},r);this._axios=e.create(n)}return r(s,[{key:"axios",value:function(){return this._axios}},{key:"setHeader",value:function(e,t){this._axios.defaults.headers[e]=t}},{key:"setHeaders",value:function(e){for(var t in e)this.setHeader(t,e[t])}},{key:"endpoint",value:function(e,t){var r=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],n=t||e.replace(/\//g,"_");if(this.apiCache[n])return this.apiCache[n];var s=function(e,t){var r=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],n=function(){var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return e.makeRequest("get","/"+t,r)},s=function(r){return e.makeRequest("post","/"+t,r)},a=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return n(e)};return r?(a.all=n,a.create=s,a.find=function(r){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return e.makeRequest("get","/"+t+"/"+r,n)},a.update=function(r,n){return e.makeRequest("put","/"+t+"/"+r,n)},a.delete=a.remove=function(r){return e.makeRequest("delete","/"+t+"/"+r)},a.one=function(r){return e.endpoint(t+"/"+r,t+"_"+r,!1)}):(a.get=n,a.post=s,a.put=function(r){return e.makeRequest("put","/"+t,r)},a.delete=function(){return e.makeRequest("delete","/"+t)}),new Proxy(a,{get:function(n,s){return s in n?n[s]:e.endpoint(t+"/"+s,t+"_"+s,!r)}})}(this,e,r);return this.apiCache[n]=s,s}},{key:"endpoints",value:function(e){for(var t in e)this.endpoint(e[t],t)}},{key:"makeRequest",value:async function(e,t,r){var n={url:t,method:e};"get"===e?n.params=r:n.data=r,this.requestTransformers.length&&this.requestTransformers.forEach(function(e){e(n)});try{var s=await this._axios.request(n);return this.transformResponse(s)}catch(e){if(e.response)return this.transformResponse(e.response);throw e}}},{key:"transformResponse",value:function(e){var t=this._wrapAxiosResponse(e);return this.responseTransformers.length&&this.responseTransformers.forEach(function(e){return e(t)}),t}},{key:"addRequestTransformer",value:function(e){return this.requestTransformers.push(e),this}},{key:"addResponseTransformer",value:function(e){return this.responseTransformers.push(e),this}},{key:"_wrapAxiosResponse",value:function(e){var t={status:e.status,statusText:e.statusText,config:e.config,headers:e.headers,data:e.data};return t.isOk=200==t.status,t.isCreated=201==t.status,t.isBadRequest=400==t.status,t.isForbidden=403==t.status,t.isNotFound=404==t.status,t.isServerError=500==t.status,t.isSuccessful=n(t.status,200,299),t.isClientError=n(t.status,400,499),t.isServerError=n(t.status,500,599),t}}]),s}();return function(e){if(!e.baseUrl)throw new Error("config.baseUrl is required");var t=new s(e);return new Proxy(t,{get:function(e,t){return t in e?e[t]:e.endpoint(t)}})}});
